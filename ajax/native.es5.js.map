{"version":3,"sources":["native.es5.js"],"names":[],"mappings":"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","file":"native.es5.js","sourcesContent":["'use strict';\n\n/**\n * ajax 请求\n * @desc 向服务器发起 异步请求\n * @param {String} type 请求的类型\n * @param {String} url 请求地址\n * @param {Boolean} async 是否异步\n * @param {Object} data body传输数据\n * @param {String} dataType 返回值数据类型\n * @param {String} contentType 传递值数据类型\n * @param {function} beforeSend 发送前执行\n * @param {function} success 成功回调，返回{data, code}\n * @param {function} error 错误回调，返回{data, code}\n * @param {Construction} promise promise构造函数,传递null默认不使用promise回调\n * @returns {promise|null} 如果构造函数存在则返回一个promise，否则null\n */\n\nfunction ajax(_ref, promise) {\n    var _ref$type = _ref.type;\n    var type = _ref$type === undefined ? 'GET' : _ref$type;\n    var _ref$url = _ref.url;\n    var url = _ref$url === undefined ? '' : _ref$url;\n    var _ref$async = _ref.async;\n    var async = _ref$async === undefined ? true : _ref$async;\n    var _ref$data = _ref.data;\n    var data = _ref$data === undefined ? null : _ref$data;\n    var _ref$params = _ref.params;\n    var params = _ref$params === undefined ? {} : _ref$params;\n    var _ref$dataType = _ref.dataType;\n    var dataType = _ref$dataType === undefined ? 'text' : _ref$dataType;\n    var _ref$contentType = _ref.contentType;\n    var contentType = _ref$contentType === undefined ? 'application/json' : _ref$contentType;\n    var _ref$beforeSend = _ref.beforeSend;\n    var beforeSend = _ref$beforeSend === undefined ? function () {} : _ref$beforeSend;\n    var _ref$success = _ref.success;\n    var success = _ref$success === undefined ? function () {} : _ref$success;\n    var _ref$error = _ref.error;\n    var error = _ref$error === undefined ? function () {} : _ref$error;\n\n    beforeSend();\n    var xhr = createXmlHttpRequest();\n    // let xhr = new XMLHttpRequest()\n    xhr.responseType = dataType;\n    xhr.open(type, url + '?' + formatParams(params), async);\n    xhr.setRequestHeader('Content-Type', contentType);\n    xhr.send(JSON.stringify(data));\n    var resovleFn = void 0;\n    var rejectFn = void 0;\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            var json = void 0;\n            try {\n                json = JSON.parse(xhr.responseText);\n            } catch (e) {\n                json = xhr.responseText;\n            }\n            var response = { data: json, code: xhr.status };\n            if (xhr.status >= 200 && xhr < 300) {\n                success(response);\n                resovleFn && resovleFn(response);\n            } else {\n                error(response);\n                rejectFn && rejectFn(response);\n            }\n        }\n    };\n    if (promise) {\n        return new promise(function (resolve, reject) {\n            resovleFn = resolve;\n            rejectFn = reject;\n        });\n    }\n}\n/**\n * 格式化参数\n * @param {Object} params\n * @returns {string}\n */\nfunction formatParams() {\n    var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var arr = [];\n    for (var name in params) {\n        arr.push(encodeURIComponent(name) + '=' + encodeURIComponent(params[name]));\n    }\n    return arr.join('&');\n}\n\n/**\n * 创建一个xhr对象\n * @desc 对于绝大多数现代浏览器都可以直接使用 window.XMLHttpRequest 获得 xhr 对象\n * @returns {*}\n */\nfunction createXmlHttpRequest() {\n    if (window.ActiveXObject) {\n        // IE 7 以下,事实上此情况不需要做兼容，不需要的话可以完全可以移除\n        return new ActiveXObject('Microsoft.XMLHTTP');\n    } else if (window.XMLHttpRequest) {\n        return new XMLHttpRequest();\n    }\n}\n\n//# sourceMappingURL=native.es5.js.map\n\n//# sourceMappingURL=native.es5.js.map\n\n//# sourceMappingURL=native.es5.js.map"]}